/* jquery.kinetic.js v1.6 | MIT License (c) 2011 Dave Taylor | http://the-taylors.org/jquery.kinetic */
;(function(g){var n={decelerate:true,triggerHardware:false,y:true,x:true,slowdown:0.9,maxvelocity:40,throttleFPS:60,movingClass:{up:"kinetic-moving-up",down:"kinetic-moving-down",left:"kinetic-moving-left",right:"kinetic-moving-right"},deceleratingClass:{up:"kinetic-decelerating-up",down:"kinetic-decelerating-down",left:"kinetic-decelerating-left",right:"kinetic-decelerating-right"}},k="kinetic-settings",c="kinetic-active";if(!window.requestAnimationFrame){window.requestAnimationFrame=(function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(p,o){window.setTimeout(p,1000/60)}}())}g.support=g.support||{};g.extend(g.support,{touch:"ontouchend" in document});var d=function(){return false};var i=function(o,p){return Math.floor(Math.abs(o))===0?0:o*p};var m=function(q,o){var p=q;if(q>0){if(q>o){p=o}}else{if(q<(0-o)){p=(0-o)}}return p};var j=function(p,o){this.removeClass(p.movingClass.up).removeClass(p.movingClass.down).removeClass(p.movingClass.left).removeClass(p.movingClass.right).removeClass(p.deceleratingClass.up).removeClass(p.deceleratingClass.down).removeClass(p.deceleratingClass.left).removeClass(p.deceleratingClass.right);if(p.velocity>0){this.addClass(o.right)}if(p.velocity<0){this.addClass(o.left)}if(p.velocityY>0){this.addClass(o.down)}if(p.velocityY<0){this.addClass(o.up)}};var l=function(p,o){if(typeof o.stopped==="function"){o.stopped.call(p,o)}};var b=function(q,p){var o=q[0];if(p.x&&o.scrollWidth>0){o.scrollLeft=p.scrollLeft=o.scrollLeft+p.velocity;if(Math.abs(p.velocity)>0){p.velocity=p.decelerate?i(p.velocity,p.slowdown):p.velocity}}else{p.velocity=0}if(p.y&&o.scrollHeight>0){o.scrollTop=p.scrollTop=o.scrollTop+p.velocityY;if(Math.abs(p.velocityY)>0){p.velocityY=p.decelerate?i(p.velocityY,p.slowdown):p.velocityY}}else{p.velocityY=0}j.call(q,p,p.deceleratingClass);if(typeof p.moved==="function"){p.moved.call(q,p)}if(Math.abs(p.velocity)>0||Math.abs(p.velocityY)>0){window.requestAnimationFrame(function(){b(q,p)})}else{l(q,p)}};var f=function(r,p){var q=g.kinetic.callMethods[r],o=Array.prototype.slice.call(arguments);if(q){this.each(function(){var t=o.slice(1),s=g(this).data(k);t.unshift(s);q.apply(this,t)})}};var a=function(q,p){var o=q[0];if(g.support.touch){q.bind("touchstart",p.events.touchStart).bind("touchend",p.events.inputEnd).bind("touchmove",p.events.touchMove)}else{q.mousedown(p.events.inputDown).mouseup(p.events.inputEnd).mousemove(p.events.inputMove)}q.click(p.events.inputClick).bind("selectstart",d);q.bind("dragstart",p.events.dragStart)};var e=function(q,p){var o=q[0];if(g.support.touch){o.removeEventListener("touchstart",p.events.touchStart,false);o.removeEventListener("touchend",p.events.inputEnd,false);o.removeEventListener("touchmove",p.events.touchMove,false)}else{q.unbind("mousedown",p.events.inputDown).unbind("mouseup",p.events.inputEnd).unbind("mousemove",p.events.inputMove)}q.unbind("click",p.events.inputClick).unbind("selectstart",d);q.unbind("dragstart",p.events.dragStart)};var h=function(o){this.addClass(c).each(function(){var G=g.extend({},n,o);var A=this,w=g(this),s,y=false,x,z=false,H=false,B,p,D=1000/G.throttleFPS,v,C;G.velocity=0;G.velocityY=0;var r=function(){s=false;x=false;H=false};g(document).mouseup(r).click(r);var F=function(){G.velocity=m(y-s,G.maxvelocity);G.velocityY=m(z-x,G.maxvelocity)};var q=function(I){if(g.isFunction(G.filterTarget)){return G.filterTarget.call(A,I)!==false}return true};var u=function(J,I){H=true;G.velocity=y=0;G.velocityY=z=0;s=J;x=I};var t=function(){if(s&&y&&G.decelerate===false){G.decelerate=true;F();s=y=H=false;b(w,G)}};var E=function(J,I){if(!v||new Date()>new Date(v.getTime()+D)){v=new Date();if(H&&(s||x)){if(C){g(C).blur();C=null;w.focus()}G.decelerate=false;G.velocity=G.velocityY=0;w[0].scrollLeft=G.scrollLeft=G.x?w[0].scrollLeft-(J-s):w[0].scrollLeft;w[0].scrollTop=G.scrollTop=G.y?w[0].scrollTop-(I-x):w[0].scrollTop;y=s;z=x;s=J;x=I;F();j.call(w,G,G.movingClass);if(typeof G.moved==="function"){G.moved.call(w,G)}}}};G.events={touchStart:function(I){var J;if(q(I.target)){J=I.originalEvent.touches[0];u(J.clientX,J.clientY);I.stopPropagation()}},touchMove:function(I){var J;if(H){J=I.originalEvent.touches[0];E(J.clientX,J.clientY);if(I.preventDefault){I.preventDefault()}}},inputDown:function(I){if(q(I.target)){u(I.clientX,I.clientY);C=I.target;if(I.target.nodeName==="IMG"){I.preventDefault()}I.stopPropagation()}},inputEnd:function(I){t();C=null;if(I.preventDefault){I.preventDefault()}},inputMove:function(I){if(H){E(I.clientX,I.clientY);if(I.preventDefault){I.preventDefault()}}},inputClick:function(I){if(Math.abs(G.velocity)>0){I.preventDefault();return false}},dragStart:function(I){if(C){return false}}};a(w,G);w.data(k,G).css("cursor","move");if(G.triggerHardware){w.css("-webkit-transform","translate3d(0,0,0)")}})};g.kinetic={settingsKey:k,callMethods:{start:function(p,o){var q=g(this);p=g.extend(p,o);if(p){p.decelerate=false;b(q,p)}},end:function(p,o){var q=g(this);if(p){p.decelerate=true}},stop:function(p,o){p.velocity=0;p.velocityY=0;p.decelerate=true},detach:function(p,o){var q=g(this);e(q,p);q.removeClass(c).css("cursor","")},attach:function(p,o){var q=g(this);a(q,p);q.addClass(c).css("cursor","move")}}};g.fn.kinetic=function(o){if(typeof o==="string"){f.apply(this,arguments)}else{h.call(this,o)}return this}}(window.jQuery||window.Zepto));